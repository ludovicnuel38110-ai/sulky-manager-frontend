<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SULKY-BET</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- LOADER -->
<div id="loader">
  <div class="spinner"></div>
  <p>Connexion au serveur Sulky-Bet...</p>
</div>

<header class="main-header">
    <div class="header-content">

        <div class="header-text">
            <h1>SULKY-BET</h1>
            <p>Le PMU officiel de Sulkyland</p>
        </div>

        <!-- ZONE CONNEXION / USER -->
        <div id="authZone" class="header-actions"></div>

    </div>
</header>

<nav>
    <button onclick="scrollToSection('courses')">Courses</button>
    <button onclick="scrollToSection('results')">R√©sultats</button>
    <button onclick="scrollToSection('ranking')">Classement</button>
    <button onclick="scrollToSection('news')">Actualit√©s</button>
    <a href="aide.html"><button>Aide</button></a>
</nav>

<!-- PRESENTATION -->
<div class="section intro-section">
    <h2>Bienvenue sur Sulky-Bet</h2>
    <p class="intro-text">
        Sulky-Bet est la plateforme officielle de paris hippiques de <b>Sulkyland</b>.
        Pariez sur les plus grandes courses avec vos sulky.
    </p>
</div>

<!-- COURSES -->
<div class="section" id="courses">
    <h2>üü¢ Courses disponibles</h2>
    <div class="course">
        <div>
            <strong>R1 ‚Äì VINCENNES</strong><br>
            Dimanche 01 f√©vrier 2026
        </div>
        <a href="vincennes.html">
            <button class="bet-btn">Voir le programme</button>
        </a>
    </div>
</div>

<script>
function scrollToSection(id) {
    document.getElementById(id).scrollIntoView({ behavior: "smooth" });
}

/* AUTH HEADER */
const authZone = document.getElementById("authZone");
const token = localStorage.getItem("token");
const pseudo = localStorage.getItem("pseudo");
const balance = localStorage.getItem("balance");

if (!token) {
    authZone.innerHTML = `
        <a href="login.html"><button>Connexion</button></a>
        <a href="register.html"><button>Cr√©er un compte</button></a>
    `;
} else {
    authZone.innerHTML = `
        <span>üë§ <b>${pseudo}</b></span>
        <span>üí∞ <b>${balance} Sulky</b></span>
        <button id="logoutBtn">D√©connexion</button>
    `;

    document.getElementById("logoutBtn").onclick = () => {
        localStorage.clear();
        window.location.href = "index.html";
    };
}

/* WAKE UP RENDER */
fetch("https://sulky-manager-backend.onrender.com/")
  .then(() => {
    document.getElementById("loader").style.display = "none";
  })
  .catch(() => {
    document.querySelector("#loader p").innerText =
      "R√©veil du serveur... merci de patienter ‚è≥";
  });
</script>

</body>
</html>
