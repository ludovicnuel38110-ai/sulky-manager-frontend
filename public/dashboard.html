<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Sulky-Bet â€“ Dashboard</title>
<link rel="stylesheet" href="style.css">

<style>

/* ================= BACKGROUND ================= */

body{
  background:
    linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.75)),
    url("images/bg.jpg");
  background-size:cover;
  background-position:center;
  background-attachment:fixed;
}


/* =====================================================
   HEADER NOIR AVEC LOGO IMAGE + TEXTE NEON
===================================================== */

.main-header{
  display:flex;
  justify-content:space-between;
  align-items:center;

  background:#000;
  border-bottom:2px solid #00ff88;

  padding:12px 35px;
}

/* bloc logo */
.logo-wrap{
  display:flex;
  align-items:center;
  gap:18px;
}

/* image cheval */
.logo-img{
  height:70px;
  width:auto;
  object-fit:contain;
  filter:none;
  animation:none;
  opacity:.95;
}

/* texte logo */
.logo-text{
  font-size:42px;
  font-weight:900;
  letter-spacing:2px;
  color:#00ff88;

  text-shadow:
    0 0 12px #00ff88,
    0 0 35px #00ff88,
    0 0 60px rgba(0,255,136,.8);
}

.header-actions{
  display:flex;
  gap:12px;
}


/* ================= LAYOUT ================= */

.dashboard-wrapper{
  max-width:1200px;
  margin:80px auto;
  padding:25px;
}


/* ================= CARD ================= */

.dashboard-card{
  background:rgba(0,110,55,.55);
  backdrop-filter:blur(14px);

  border-radius:26px;
  padding:60px;

  border:1px solid rgba(0,255,136,.6);

  box-shadow:
    0 0 45px rgba(0,255,136,.25),
    inset 0 0 35px rgba(0,0,0,.45);

  text-align:center;
}


/* ================= TITRES ================= */

#welcome{
  font-size:38px;
  margin-bottom:25px;
}

#balance{
  font-size:34px;
  margin:40px 0;
  color:#00ff88;
  text-shadow:0 0 20px #00ff88;
}


/* ================= GRID ================= */

.actions-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
  gap:25px;
  margin-bottom:35px;
  
  

}


/* ================= BOUTONS ================= */

.big-btn{
  padding:24px;
  font-size:18px;
  font-weight:700;

  border-radius:18px;
  border:none;

  background:linear-gradient(135deg,#00ff88,#00cc66);
  color:#001a0f;

  cursor:pointer;

  box-shadow:0 0 25px rgba(0,255,136,.6);
  transition:.25s;
}

.big-btn:hover{
  transform:translateY(-5px) scale(1.05);
  box-shadow:0 0 45px #00ff88;
}


/* ================= MESSAGE ================= */

.welcome-box{
  margin-top:25px;
  padding:28px;

  background:rgba(0,0,0,.5);
  border-radius:18px;
  line-height:1.7;
  font-size:16px;
}


/* ================= ADMIN PANEL ================= */

#adminPanel{
  display:none;
  margin-top:40px;
}


/* ================= MOBILE ================= */

@media(max-width:800px){
  .logo-img{ height:55px; }
  .logo-text{ font-size:30px; }
}

</style>
</head>



<body>

<!-- HEADER -->
<header class="main-header">

  <div class="logo-wrap">
    <img src="images/horse-neon.png" class="logo-img">
    <div class="logo-text">SULKY-BET</div>
  </div>

  <div class="header-actions">
    <button onclick="location.href='actus.html'" class="big-btn">ğŸ“° ActualitÃ©s</button>
    <button id="logoutBtn" class="big-btn">DÃ©connexion</button>
  </div>

</header>



<!-- DASHBOARD -->
<div class="dashboard-wrapper">

  <div class="dashboard-card">

    <h1 id="welcome">Bienvenue</h1>

    <!-- ACTIONS -->
    <div class="actions-grid">
      <button class="big-btn" id="btnRaces">ğŸ‡ Courses</button>
      <button class="big-btn" id="btnHistory">ğŸ“œ Mes paris</button>
      <button class="big-btn" id="btnResults">ğŸ RÃ©sultats</button>
      <button class="big-btn" id="btnAide">â“ Aide</button>
      <button class="big-btn" id="btnAdminBets">ğŸ“Š Tous les paris</button>

    </div>


   <!-- MESSAGE -->
<div class="welcome-box">
  ğŸ‘‹ Bienvenue sur <strong>Sulky-Bet</strong> !<br><br>

  Parie facilement sur les courses proposÃ©es dans lâ€™onglet <strong>Courses</strong> et suis tes paris en toute tranquillitÃ©.<br><br>

  Pour crÃ©diter ton compte, contacte-moi sur <strong>Sulkyland</strong> au pseudo <strong>Turfiste83</strong>.  
  Je reverserai les fonds le plus rapidement possible afin que tu puisses jouer.<br><br>

  ğŸ”’ Pense Ã  conserver ton pseudo et ton mot de passe.<br><br>

  â„¹ï¸ <em>Sulky-Bet est un projet indÃ©pendant et autodidacte.  
  Sulkyland ne gÃ¨re pas le site et ne peut en aucun cas intervenir ou Ãªtre tenu responsable en cas de problÃ¨me technique.  
  Pour toute question ou aide, contacte-moi directement.</em><br><br>

  Merci pour ta confiance et bons paris ğŸ
</div>


    <h2 id="balance">Solde : ... â‚¬</h2>


    <!-- ADMIN PANEL (VISIBLE UNIQUEMENT ADMIN) -->
    <div id="adminPanel">

      <h3 style="color:#00ff88;margin-bottom:20px;">âš™ï¸ Administration</h3>

      <div class="actions-grid">
        <button class="big-btn" onclick="location.href='admin-courses.html'">ğŸ—ï¸ GÃ©rer les courses</button>
        <button class="big-btn" onclick="location.href='admin-settle.html'">ğŸ RÃ©gler une course</button>
        <button class="big-btn" onclick="location.href='admin-balance.html'">ğŸ’° CrÃ©diter joueur</button>
      </div>

    </div>

  </div>

</div>



<script>
document.addEventListener("DOMContentLoaded", async () => {

  const token = localStorage.getItem("token");
  if(!token) return location.href="login.html";

  const welcome = document.getElementById("welcome");
  const balanceBox = document.getElementById("balance");
  const adminPanel = document.getElementById("adminPanel");

  const res = await fetch(
    "https://sulky-manager-backend.onrender.com/api/users/me",
    { headers:{ Authorization:"Bearer "+token } }
  );

  const user = await res.json();

  welcome.innerText = "Bienvenue " + user.pseudo;
  balanceBox.innerText = "Solde : " + user.balance + " â‚¬";

  /* ğŸ”¥ ADMIN DETECTION */
  const payload = JSON.parse(atob(token.split(".")[1]));
  if(payload.isAdmin) adminPanel.style.display = "block";


  /* NAVIGATION */
  btnRaces.onclick   = ()=>location.href="races.html";
  btnHistory.onclick = ()=>location.href="history.html";
  btnResults.onclick = ()=>location.href="results.html";
  btnAide.onclick    = ()=>location.href="aide.html";
  btnAdminBets.onclick = ()=>location.href="admin-bets.html";

  logoutBtn.onclick = ()=>{
    localStorage.clear();
    location.href="index.html";
  };

});
</script>

</body>
</html>
