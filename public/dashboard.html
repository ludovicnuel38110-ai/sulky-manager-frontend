<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Sulky-Bet â€“ Dashboard</title>
<link rel="stylesheet" href="style.css">

<style>

/* =================================================
   ðŸŒŒ BACKGROUND (comme accueil)
================================================= */

body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;

  background:
    linear-gradient(rgba(0,0,0,.65), rgba(0,0,0,.85)),
    url("images/bg.jpg");

  background-size:cover;
  background-position:center;
  background-attachment:fixed;

  color:white;
}


/* =================================================
   ðŸ”µ HEADER PRO STYLE BOOKMAKER
================================================= */

.main-header{
  display:flex;
  justify-content:space-between;
  align-items:center;

  padding:18px 40px;

  background:#061b1a;
  border-bottom:2px solid #00e0b8;
}

.logo-text{
  font-size:34px;
  font-weight:900;
  letter-spacing:2px;

  color:#00e0b8;

  text-shadow:0 0 15px rgba(0,224,184,.5);
}

/* bloc droite */
.header-right{
  display:flex;
  align-items:center;
  gap:18px;
}

/* solde visible direct */
.balance-pill{
  padding:10px 18px;
  border-radius:30px;

  background:#002e2a;
  border:1px solid #00e0b8;

  font-weight:700;
  color:#00e0b8;
}


/* boutons header */

.header-btn{
  padding:10px 18px;
  border-radius:10px;

  background:#00e0b8;
  color:#00201c;

  font-weight:700;
  border:none;
  cursor:pointer;
  transition:.2s;
}

.header-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 0 15px #00e0b8;
}


/* =================================================
   ðŸ“¦ CARD PRINCIPALE
================================================= */

.dashboard-wrapper{
  max-width:1200px;
  margin:70px auto;
  padding:25px;
}

.dashboard-card{
  background:rgba(0,40,35,.75);
  backdrop-filter:blur(12px);

  border-radius:20px;
  padding:45px;

  border:1px solid rgba(0,224,184,.35);
}


/* =================================================
   TITRE
================================================= */

#welcome{
  font-size:32px;
  margin-bottom:35px;
  color:#00e0b8;
}


/* =================================================
   GRID BOUTONS (STYLE PRO)
================================================= */

.actions-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:22px;
}

.action-btn{

  padding:22px;

  border-radius:14px;
  border:1px solid rgba(0,224,184,.25);

  background:#052927;

  color:white;

  font-size:16px;
  font-weight:600;

  cursor:pointer;
  transition:.25s;
}

.action-btn:hover{
  background:#063a36;
  border-color:#00e0b8;
  transform:translateY(-3px);
}


/* =================================================
   MESSAGE INFO
================================================= */

.info-box{
  margin-top:40px;

  background:#041e1c;
  padding:25px;

  border-radius:14px;
  font-size:15px;
  line-height:1.6;
  opacity:.85;
}


/* =================================================
   ADMIN PANEL
================================================= */

#adminPanel{
  margin-top:40px;
  display:none;
}

.admin-title{
  color:#00e0b8;
  margin-bottom:15px;
}


/* =================================================
   MOBILE
================================================= */

@media(max-width:700px){
  .dashboard-card{ padding:25px; }
}

</style>
</head>



<body>

<!-- =================================================
   HEADER
================================================= -->

<header class="main-header">

  <div class="logo-text">SULKY-BET</div>

  <div class="header-right">
    <div id="balanceTop" class="balance-pill">Solde : ... â‚¬</div>
    <button onclick="location.href='actus.html'" class="header-btn">ActualitÃ©s</button>
    <button id="logoutBtn" class="header-btn">DÃ©connexion</button>
  </div>

</header>



<!-- =================================================
   DASHBOARD
================================================= -->

<div class="dashboard-wrapper">

  <div class="dashboard-card">

    <h1 id="welcome">Bienvenue</h1>

    <!-- ACTIONS PRINCIPALES -->
    <div class="actions-grid">

      <button class="action-btn" id="btnRaces">Courses</button>
      <button class="action-btn" id="btnHistory">Mes paris</button>
      <button class="action-btn" id="btnResults">RÃ©sultats</button>
      <button class="action-btn" id="btnAide">Aide</button>
      <button class="action-btn" id="btnAdminBets">Tous les paris</button>

    </div>


    <!-- MESSAGE SOBRE -->
    <div class="info-box">
      Sulky-Bet est une plateforme indÃ©pendante de paris hippiques.  
      Placez vos paris, suivez vos performances et gÃ©rez votre solde en toute simplicitÃ©.
    </div>


    <!-- ADMIN PANEL -->
    <div id="adminPanel">

      <h3 class="admin-title">Administration</h3>

      <div class="actions-grid">
        <button class="action-btn" onclick="location.href='admin-courses.html'">GÃ©rer les courses</button>
        <button class="action-btn" onclick="location.href='admin-settle.html'">RÃ©gler une course</button>
        <button class="action-btn" onclick="location.href='admin-balance.html'">CrÃ©diter joueur</button>
      </div>

    </div>

  </div>

</div>



<script>

document.addEventListener("DOMContentLoaded", async () => {

  const token = localStorage.getItem("token");
  if(!token) return location.href="login.html";

  const welcome = document.getElementById("welcome");
  const balanceTop = document.getElementById("balanceTop");
  const adminPanel = document.getElementById("adminPanel");

  const res = await fetch(
    "https://sulky-manager-backend.onrender.com/api/users/me",
    { headers:{ Authorization:"Bearer "+token } }
  );

  const user = await res.json();

  welcome.innerText = "Bienvenue " + user.pseudo;
  balanceTop.innerText = "Solde : " + user.balance + " â‚¬";


  /* ADMIN */
  const payload = JSON.parse(atob(token.split(".")[1]));
  if(payload.isAdmin) adminPanel.style.display = "block";


  /* NAVIGATION */
  btnRaces.onclick   = ()=>location.href="races.html";
  btnHistory.onclick = ()=>location.href="history.html";
  btnResults.onclick = ()=>location.href="results.html";
  btnAide.onclick    = ()=>location.href="aide.html";
  btnAdminBets.onclick = ()=>location.href="admin-bets.html";

  logoutBtn.onclick = ()=>{
    localStorage.clear();
    location.href="index.html";
  };

});

</script>

</body>
</html>
