<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SULKY-BET</title>
<link rel="stylesheet" href="style.css">

<!-- ğŸ” REDIRECTION SI CONNECTÃ‰ -->
<script>
const tokenCheck = localStorage.getItem("token");

if (tokenCheck) {
  fetch("https://sulky-manager-backend.onrender.com/api/users/me", {
    headers:{ Authorization:"Bearer "+tokenCheck }
  })
  .then(r=>{
    if(r.ok) window.location.href="dashboard.html";
  })
  .catch(()=>{});
}
</script>

</head>

<body>

<!-- ================= LOADER ================= -->
<div id="loader">
  <div class="spinner"></div>
  <p>Connexion au serveur Sulky-Bet...</p>
</div>


<header class="main-header">
  <div class="header-content">

    <div class="header-text">
      <h1>SULKY-BET</h1>
      <p>Le PMU officiel de Sulkyland</p>
    </div>

    <div id="authZone" class="header-actions"></div>

  </div>
</header>


<nav>
  <button onclick="scrollToSection('courses')">Courses</button>
  <button onclick="scrollToSection('results')">RÃ©sultats</button>
  <button onclick="scrollToSection('ranking')">Classement</button>
  <button onclick="scrollToSection('news')">ActualitÃ©s</button>
  <a href="aide.html"><button>Aide</button></a>
  <a href="actus.html"><button>ActualitÃ©s</button></a>

</nav>


<!-- ================= PRESENTATION ================= -->
<div class="section intro-section">
  <h2>Bienvenue sur Sulky-Bet</h2>

  <p class="intro-text">
    Sulky-Bet est la plateforme officielle de paris hippiques de <b>Sulkyland</b>.
    Pariez sur les plus grandes courses, suivez vos gains en temps rÃ©el
    et devenez lâ€™un des meilleurs turfistes du jeu.
  </p>

  <div class="intro-features">
    <div class="intro-box">
      ğŸ‡ <b>Pariez sur les courses</b><br>
      AccÃ©dez aux programmes officiels et placez vos paris stratÃ©giques.
    </div>

    <div class="intro-box">
      ğŸ’° <b>GÃ©rez votre solde</b><br>
      DÃ©pÃ´ts manuels, gains instantanÃ©s et suivi prÃ©cis de vos Sulky.
    </div>

    <div class="intro-box">
      ğŸ† <b>Classement des joueurs</b><br>
      Grimpez dans le classement et imposez-vous comme un turfiste dâ€™Ã©lite.
    </div>
  </div>

  <div class="intro-cta">
    <a href="register.html">
      <button class="cta-btn">ğŸš€ Sâ€™inscrire maintenant</button>
    </a>
  </div>
</div>


<!-- ================= COURSES DEMO ================= -->
<div class="section" id="courses">
  <h2>ğŸŸ¢ Courses disponibles</h2>

  <div class="course">
    <div>
      <strong>R1 â€“ VINCENNES</strong><br>
      Dimanche 01 fÃ©vrier 2026
    </div>
    <a href="login.html">
      <button class="bet-btn">Se connecter pour parier</button>
    </a>
  </div>
</div>



<!-- ================= SCRIPT ================= -->
<script>

/* SCROLL */
function scrollToSection(id){
  document.getElementById(id).scrollIntoView({ behavior:"smooth" });
}


/* AUTH HEADER */
const authZone = document.getElementById("authZone");
const token = localStorage.getItem("token");
const pseudo = localStorage.getItem("pseudo");
const balance = localStorage.getItem("balance") || 0;

if (!token) {
  authZone.innerHTML = `
    <a href="login.html"><button>Connexion</button></a>
    <a href="register.html"><button>CrÃ©er un compte</button></a>
  `;
} else {
  authZone.innerHTML = `
    <span>ğŸ‘¤ <b>${pseudo}</b></span>
    <span>ğŸ’° <b>${balance} Sulky</b></span>
    <button id="logoutBtn">DÃ©connexion</button>
  `;

  document.getElementById("logoutBtn").onclick = () => {
    localStorage.clear();
    location.href="index.html";
  };
}


/* ================= LOADER SAFE (FIX MOBILE BUG) ================= */

const loader = document.getElementById("loader");

/* sÃ©curitÃ© : jamais bloquer plus de 3s */
setTimeout(()=>{
  loader.style.display="none";
},3000);

/* rÃ©veil backend */
fetch("https://sulky-manager-backend.onrender.com/")
  .then(()=>{
    loader.style.display="none";
  })
  .catch(()=>{
    loader.style.display="none"; // IMPORTANT
  });

</script>

</body>
</html>
