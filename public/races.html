<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Sulky-Bet ‚Äì R√©unions</title>
<link rel="stylesheet" href="style.css">

<style>

/* ================= LAYOUT GLOBAL ================= */

body{
  background:#071a17;
}

.races-layout{
  display:flex;
  min-height:calc(100vh - 80px);
}

/* ================= HERO IMAGE (GAUCHE) ================= */

.hero{
  flex:1.4;

  background:
    linear-gradient(rgba(0,0,0,.65), rgba(0,0,0,.75)),
    url("images/bg.jpg");

  background-size:cover;
  background-position:center;

  display:flex;
  flex-direction:column;
  justify-content:center;

  padding:60px;
  color:white;
}

.hero h2{
  font-size:40px;
  color:#00ff88;
  margin-bottom:15px;
}

.hero p{
  opacity:.85;
  max-width:420px;
  line-height:1.6;
}

/* ================= PANEL DROIT ================= */

.panel{
  flex:1;
  background:#0a201c;

  padding:30px;
  overflow-y:auto;

  border-left:2px solid rgba(0,255,136,.25);
}

/* ================= TITRE ================= */

.panel h3{
  color:#00ff88;
  margin-bottom:20px;
}

/* ================= CARDS ================= */

.meeting-card{
  background:rgba(0,255,136,.05);
  border:1px solid rgba(0,255,136,.25);

  border-radius:14px;
  padding:16px;

  display:flex;
  justify-content:space-between;
  align-items:center;

  margin-bottom:14px;

  transition:.2s;
}

.meeting-card:hover{
  transform:translateY(-3px);
  border-color:#00ff88;
  box-shadow:0 0 20px rgba(0,255,136,.3);
}

/* ================= BUTTON ================= */

.bet-btn{
  background:linear-gradient(135deg,#00ff88,#00cc66);
  border:none;
  padding:8px 14px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}

/* ================= MOBILE ================= */

@media(max-width:900px){
  .races-layout{
    flex-direction:column;
  }

  .hero{
    min-height:260px;
  }
}

</style>
</head>



<body>

<header class="main-header">
  <div class="header-content">
    <div class="header-text">
      <h1>SULKY-BET</h1>
      <p>R√©unions disponibles</p>
    </div>

    <a href="dashboard.html">
      <button>‚¨Ö Retour dashboard</button>
    </a>
  </div>
</header>



<div class="races-layout">

  <!-- ================= HERO GAUCHE ================= -->

  <div class="hero">
    <h2>Courses du jour</h2>
    <p>
      Consulte les r√©unions hippiques disponibles,
      acc√®de aux courses et place tes paris en temps r√©el.
    </p>
  </div>


  <!-- ================= LISTE DROITE ================= -->

  <div class="panel">

    <h3>üìÖ R√©unions</h3>

    <div id="reunionsList">
      Chargement...
    </div>

  </div>

</div>



<script>
document.addEventListener("DOMContentLoaded", init);

const API_URL = "https://sulky-manager-backend.onrender.com/api/races";


async function init(){
  await loadReunions();
}


async function loadReunions(){

  const container = document.getElementById("reunionsList");

  try {

    const res = await fetch(API_URL);

    if(!res.ok)
      throw new Error("API error");

    const reunions = await res.json();

    container.innerHTML = "";

    if (!Array.isArray(reunions) || reunions.length === 0) {
      container.innerHTML = "<p>Aucune r√©union disponible</p>";
      return;
    }

    reunions.forEach(reunion => {

      const card = document.createElement("div");
      card.className = "meeting-card";

      card.innerHTML = `
        <div>
          <strong>${reunion.reunion}</strong><br>
          <small>${reunion.date || ""}</small>
        </div>

        <a href="meeting.html?id=${encodeURIComponent(reunion._id)}">
          <button class="bet-btn">Voir</button>
        </a>
      `;

      container.appendChild(card);
    });

  }
  catch(err){

    container.innerHTML =
      "‚ùå Impossible de charger les r√©unions (serveur en d√©marrage)";
  }
}
</script>

</body>
</html>
