<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Sulky-Bet â€“ Connexion</title>
<link rel="stylesheet" href="style.css">

<style>

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;

  background:
    linear-gradient(rgba(0,0,0,.6), rgba(0,0,0,.85)),
    url("images/bg.jpg");
  background-size:cover;
}

/* box */
.login-box{
  width:360px;
  padding:35px;

  background:rgba(0,110,55,.7);
  backdrop-filter:blur(12px);

  border-radius:22px;
  text-align:center;
}

.login-box h2{
  color:#00ff88;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:12px;
  margin-top:10px;
}

button{
  width:100%;
  margin-top:15px;
}

#error{
  margin-top:10px;
  color:#ff6b6b;
}

</style>
</head>

<body>

<div class="login-box">

  <h2>Connexion</h2>

  <input id="pseudo" placeholder="Pseudo">
  <input id="password" type="password" placeholder="Mot de passe">

  <button onclick="login()">Se connecter</button>

  <div id="error"></div>

</div>


<script>

async function login(){

  const pseudo = document.getElementById("pseudo").value;
  const password = document.getElementById("password").value;
  const error = document.getElementById("error");

  error.innerText = "";

  try{

    const res = await fetch(
      "https://sulky-manager-backend.onrender.com/api/users/login",
      {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ pseudo, password })
      }
    );

    const data = await res.json();

    if(!res.ok)
      throw new Error(data.message || "Erreur connexion");

    localStorage.setItem("token", data.token);

    location.href="dashboard.html";

  }
  catch(e){
    error.innerText = e.message;
  }
}

</script>

</body>
</html>
