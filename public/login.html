<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Sulky-Bet – Connexion</title>
<link rel="stylesheet" href="style.css">

<style>

/* ================= BACKGROUND ================= */

body{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;

  background:
    linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.75)),
    url("images/bg.jpg");

  background-size:cover;
  background-position:center;
  background-attachment:fixed;

  color:#e8fff5;
  font-family:"Segoe UI", system-ui, sans-serif;
}


/* ================= CARD ================= */

.login-box{
  width:360px;

  background:rgba(0,110,55,.65);
  backdrop-filter:blur(12px);

  border-radius:20px;
  padding:35px;

  border:1px solid rgba(0,255,136,.6);

  box-shadow:
    0 0 35px rgba(0,255,136,.25),
    inset 0 0 20px rgba(0,0,0,.4);

  text-align:center;
}


/* ================= TITRE ================= */

.login-box h2{
  margin-bottom:25px;
  color:#00ff88;
  text-shadow:0 0 15px #00ff88;
}


/* ================= INPUTS ================= */

input{
  width:100%;
  padding:12px;
  margin-bottom:14px;

  border-radius:10px;
  border:none;

  background:#dbe3ea;
}


/* ================= BUTTON ================= */

button{
  width:100%;
  padding:12px;

  border:none;
  border-radius:12px;

  background:linear-gradient(135deg,#00ff88,#00cc66);
  color:#001a0f;

  font-weight:bold;
  cursor:pointer;

  box-shadow:0 0 18px rgba(0,255,136,.6);
  transition:.2s;
}

button:hover{
  transform:scale(1.03);
}


/* ================= LOADER ================= */

#loader{
  display:none;
  margin-top:10px;
  font-size:14px;
  opacity:.9;
}


/* ================= ERROR ================= */

#error{
  margin-top:10px;
  color:#ff6b6b;
  font-weight:bold;
}

</style>
</head>


<body>

<div class="login-box">

  <h2>Connexion</h2>

  <input id="pseudo" placeholder="Pseudo">
  <input id="password" type="password" placeholder="Mot de passe">

  <button onclick="login()">Se connecter</button>

  <div id="loader">⏳ Connexion au serveur…</div>
  <div id="error"></div>

</div>



<script>

/* =================================================
   CONFIG API (IMPORTANT : UNE SEULE FOIS ICI)
================================================= */

const API = "https://sulky-manager-backend.onrender.com";


/* =================================================
   LOGIN
================================================= */

async function login(){

  const pseudo   = document.getElementById("pseudo").value;
  const password = document.getElementById("password").value;
  const error    = document.getElementById("error");
  const loader   = document.getElementById("loader");

  error.innerText = "";
  loader.style.display = "block";

  try{

    const res = await fetch(
      API + "/api/auth/login",
      {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ pseudo, password })
      }
    );

    if(!res.ok)
      throw new Error("Identifiants incorrects");

    const data = await res.json();

    localStorage.setItem("token", data.token);

    location.href = "dashboard.html";
  }
  catch(e){
    loader.style.display = "none";
    error.innerText = "Erreur connexion serveur";
  }
}


/* =================================================
   ENTER = LOGIN
================================================= */

document.addEventListener("keydown",(e)=>{
  if(e.key==="Enter") login();
});

</script>

</body>
</html>
